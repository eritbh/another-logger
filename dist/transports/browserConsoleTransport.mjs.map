{"version":3,"file":"browserConsoleTransport.mjs","sources":["../../src/transports/browserConsoleTransport.ts"],"sourcesContent":["import {Transport} from \"../Logger\";\n\n/** A transport that logs messages to the browser console. */\nexport const createBrowserConsoleTransport = ({\n\tlevelColors = {},\n}: {\n\tlevelColors?: Record<keyof any, number>,\n}): Transport => {\n\t// Cache the CSS used for each level\n\tlet levelCssCache = new Map<keyof any, string>();\n\tfor (let [levelName, color] of Object.entries(levelColors)) {\n\t\t// By setting the alpha of the color to 50% (0x7F), enough of the\n\t\t// background bleeds through that using the default text color of\n\t\t// the console is pretty much always readable. This also means the\n\t\t// styles will look good in both light and dark devtools themes.\n\t\tlet backgroundColor = `#${('000000' + color.toString(16)).slice(-6)}7F`;\n\t\tlevelCssCache.set(levelName, `\n\t\t\tbackground-color: ${backgroundColor};\n\t\t`);\n\t}\n\n\treturn function browserConsoleTransport (message, level) {\n\t\tconst levelCss = levelCssCache.get(level) || '';\n\t\tconsole.log(\n\t\t\t// Initial section with CSS styling for the level name. We want some\n\t\t\t// horizontal padding around the level name in its little \"tag,\" but\n\t\t\t// we also want the tags to stand out if the log is copy-pasted or\n\t\t\t// saved to a file. We pad the sides of the level name with brackets\n\t\t\t// which we hide via CSS, leaving a visually clean interface in the\n\t\t\t// HTML console that magically turns into a bracketed level name\n\t\t\t// when saved/copied as plain text.\n\t\t\t`%c[%c${String(level)}%c]`, // String() to handle symbol level names\n\t\t\t// CSS style for the first hidden bracket\n\t\t\t`\n\t\t\t\t${levelCss}\n\t\t\t\tborder-top-left-radius: 3px;\n\t\t\t\tborder-bottom-left-radius: 3px;\n\t\t\t\tcolor: transparent;\n\t\t\t`,\n\t\t\t// CSS style for the level name\n\t\t\tlevelCss,\n\t\t\t// CSS style for the second hidden bracket\n\t\t\t`\n\t\t\t\t${levelCss}\n\t\t\t\tborder-top-right-radius: 3px;\n\t\t\t\tborder-bottom-right-radius: 3px;\n\t\t\t\tcolor: transparent;\n\t\t\t`,\n\t\t\t// The rest of the message will be unstyled\n\t\t\t// TODO: support parsing out `%c`s from the message and doing\n\t\t\t//       extra formatting to make the result equivalent to native\n\t\t\t...message,\n\t\t);\n\t}\n}\n"],"names":[],"mappings":"AAEA;MACa,6BAA6B,GAAG,CAAC,EAC7C,WAAW,GAAG,EAAE,GAGhB;;IAEA,IAAI,aAAa,GAAG,IAAI,GAAG,EAAqB,CAAC;IACjD,KAAK,IAAI,CAAC,SAAS,EAAE,KAAK,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC,EAAE;;;;;QAK3D,IAAI,eAAe,GAAG,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC,QAAQ,CAAC,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;QACxE,aAAa,CAAC,GAAG,CAAC,SAAS,EAAE;uBACR,eAAe;GACnC,CAAC,CAAC;KACH;IAED,OAAO,SAAS,uBAAuB,CAAE,OAAO,EAAE,KAAK;QACtD,MAAM,QAAQ,GAAG,aAAa,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;QAChD,OAAO,CAAC,GAAG;;;;;;;;QAQV,QAAQ,MAAM,CAAC,KAAK,CAAC,KAAK;;QAE1B;MACG,QAAQ;;;;IAIV;;QAED,QAAQ;;QAER;MACG,QAAQ;;;;IAIV;;;;QAID,GAAG,OAAO,CACV,CAAC;KACF,CAAA;AACF;;;;"}