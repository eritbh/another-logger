{"version":3,"file":"nodeConsoleTransport.mjs","sources":["../../src/transports/nodeConsoleTransport.ts"],"sourcesContent":["import { formatWithOptions, InspectOptions } from 'util';\nimport ansiColors from 'ansi-colors';\n\nimport { Transport } from '../Logger';\n\ntype StyleKey = keyof typeof ansiColors[\"styles\"];\n\n/** A transport that logs messages to the Node.js console. */\nexport const createNodeConsoleTransport = ({\n\tformatOptions = {},\n\tshowTimestamps = false,\n\tlevelStyles = {},\n}: {\n\tformatOptions?: InspectOptions,\n\tshowTimestamps?: boolean,\n\tlevelStyles?: { [levelName: string]: StyleKey | StyleKey[] },\n} = {}): Transport => {\n\t// Use colored output unless explicitly disabled\n\tformatOptions = Object.assign({colors: true}, formatOptions);\n\n\t// Cache the text/styles used for each level\n\tconst levelTextCache = new Map<keyof any, string>();\n\tfor (let [levelName, styles] of Object.entries(levelStyles)) {\n\t\tlet levelText = levelName;\n\t\tif (!Array.isArray(styles)) styles = [styles];\n\t\tstyles.forEach(style => levelText = ansiColors[style](levelText));\n\t\tlevelTextCache.set(levelName, levelText);\n\t}\n\n\treturn function nodeConsoleTransport (contents, levelName) {\n\t\tlet message = formatWithOptions(formatOptions, ...contents);\n\t\tconst levelText = levelTextCache.get(levelName) || String(levelName);\n\t\tconsole.log(`${showTimestamps ? new Date().toISOString().substr(11, 8) + ' ' : ''}${levelText} ${message}`);\n\t}\n}\n"],"names":[],"mappings":";;;AAOA;MACa,0BAA0B,GAAG,CAAC,EAC1C,aAAa,GAAG,EAAE,EAClB,cAAc,GAAG,KAAK,EACtB,WAAW,GAAG,EAAE,MAKb,EAAE;;IAEL,aAAa,GAAG,MAAM,CAAC,MAAM,CAAC,EAAC,MAAM,EAAE,IAAI,EAAC,EAAE,aAAa,CAAC,CAAC;;IAG7D,MAAM,cAAc,GAAG,IAAI,GAAG,EAAqB,CAAC;IACpD,KAAK,IAAI,CAAC,SAAS,EAAE,MAAM,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC,EAAE;QAC5D,IAAI,SAAS,GAAG,SAAS,CAAC;QAC1B,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC;YAAE,MAAM,GAAG,CAAC,MAAM,CAAC,CAAC;QAC9C,MAAM,CAAC,OAAO,CAAC,KAAK,IAAI,SAAS,GAAG,UAAU,CAAC,KAAK,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;QAClE,cAAc,CAAC,GAAG,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;KACzC;IAED,OAAO,SAAS,oBAAoB,CAAE,QAAQ,EAAE,SAAS;QACxD,IAAI,OAAO,GAAG,iBAAiB,CAAC,aAAa,EAAE,GAAG,QAAQ,CAAC,CAAC;QAC5D,MAAM,SAAS,GAAG,cAAc,CAAC,GAAG,CAAC,SAAS,CAAC,IAAI,MAAM,CAAC,SAAS,CAAC,CAAC;QACrE,OAAO,CAAC,GAAG,CAAC,GAAG,cAAc,GAAG,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC,MAAM,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,SAAS,IAAI,OAAO,EAAE,CAAC,CAAC;KAC5G,CAAA;AACF;;;;"}